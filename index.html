<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Growing Path">
<meta property="og:type" content="website">
<meta property="og:title" content="Joyce&#39; Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Joyce&#39; Blog">
<meta property="og:description" content="Growing Path">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Joyce&#39; Blog">
<meta name="twitter:description" content="Growing Path">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Joyce' Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Joyce' Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/01/cc-frontbackend-develop-note-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/01/cc-frontbackend-develop-note-1/" class="post-title-link" itemprop="url">cc-front/backend-develop-note-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-12-01 17:12:14 / 修改时间：17:12:15" itemprop="dateCreated datePublished" datetime="2020-12-01T17:12:14+08:00">2020-12-01</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li>==vue 和 PHP 对 Excel、word 导入导出的支持==</li>
<li>==安装前后端项目==</li>
<li>==本地数据库==</li>
</ol>
<h5 id="Windows-系统安装指定版本的composer："><a href="#Windows-系统安装指定版本的composer：" class="headerlink" title="Windows 系统安装指定版本的composer："></a>Windows 系统安装指定版本的composer：</h5><p><a href="https://pkg.phpcomposer.com/#how-to-install-composer" target="_blank" rel="noopener">https://pkg.phpcomposer.com/#how-to-install-composer</a></p>
<ol>
<li>找到并进入 PHP 的安装目录（和你在命令行中执行的 <code>php</code> 指令应该是同一套 PHP）。</li>
<li>将 <code>composer.phar</code> 复制到 PHP 的安装目录下面，也就是和 <code>php.exe</code> 在同一级目录。</li>
<li>在 PHP 安装目录下新建一个 <code>composer.bat</code> 文件，并将下列代码保存到此文件中。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@php <span class="string">"%~dp0composer.phar"</span> %*</span><br></pre></td></tr></table></figure>
<p>最后重新打开一个命令行窗口试一试执行 <code>composer --version</code> 看看是否正确输出版本号。</p>
<p>yii2 项目初始化命令：<code>.\init</code></p>
<h5 id="Windows-符号链接-mklink"><a href="#Windows-符号链接-mklink" class="headerlink" title="Windows 符号链接 mklink"></a>Windows 符号链接 mklink</h5><p>mklink 命令是将文件或目录建立双向连接, 该变任何一方都会发生变化, 其主要文件链接有三: 符号链接(软件接), 目录连接(软件接), 文本文件链接(硬连接), 可以这样理解, <strong>软连接, 是建立快捷方式, 硬连接, 是进行复制</strong></p>
<p>在 cmd 里面输入: <strong>mklink /?</strong> 来查看 mklink 命令和参数的使用</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mklink /D cc C:\Users\pcy\Documents\DBISWork\cc-computer-backend</span><br></pre></td></tr></table></figure>
<h5 id="使用表前缀"><a href="#使用表前缀" class="headerlink" title="使用表前缀"></a>使用表前缀</h5><p><a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-dao" target="_blank" rel="noopener">https://www.yiiframework.com/doc/guide/2.0/zh-cn/db-dao</a></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'components'</span> =&gt; [</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="string">'db'</span> =&gt; [</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="string">'tablePrefix'</span> =&gt; <span class="string">'tbl_'</span>,</span><br><span class="line">    ],</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>src\api\http.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果出现问题，就直接 hard code 写死域名</span></span><br><span class="line">Instance.defaults.baseURL = <span class="string">'http://localhost:8081/cc-computer-homepage/backend/web/index.php/api/v1'</span></span><br></pre></td></tr></table></figure>
<p>当前：<em>PHP/5.6.40</em></p>
<h3 id="Yii2-对-word、Excel-上传下载的支持——PHPOffice"><a href="#Yii2-对-word、Excel-上传下载的支持——PHPOffice" class="headerlink" title="Yii2 对 word、Excel 上传下载的支持——PHPOffice"></a>Yii2 对 word、Excel 上传下载的支持——PHPOffice</h3><p><strong>PHPExcel</strong> was officially deprecated in 2017 and permanently archived in 2019. The project has not be maintained for years and must not be used anymore. All users must migrate to its direct successor <a href="https://github.com/PHPOffice/PhpSpreadsheet" target="_blank" rel="noopener">PhpSpreadsheet</a>, or another alternative.</p>
<h4 id="PhpSpreadsheet"><a href="#PhpSpreadsheet" class="headerlink" title="PhpSpreadsheet"></a>PhpSpreadsheet</h4><p>PHP 7.2+</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpOffice</span>\<span class="title">PhpSpreadsheet</span>\<span class="title">Spreadsheet</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">PhpOffice</span>\<span class="title">PhpSpreadsheet</span>\<span class="title">Writer</span>\<span class="title">Xlsx</span>;</span><br><span class="line"></span><br><span class="line">$spreadsheet = <span class="keyword">new</span> Spreadsheet();</span><br><span class="line">$sheet = $spreadsheet-&gt;getActiveSheet();</span><br><span class="line">$sheet-&gt;setCellValue(<span class="string">'A1'</span>, <span class="string">'Hello World !'</span>);</span><br><span class="line"></span><br><span class="line">$writer = <span class="keyword">new</span> Xlsx($spreadsheet);</span><br><span class="line">$writer-&gt;save(<span class="string">'hello world.xlsx'</span>);</span><br></pre></td></tr></table></figure>
<h6 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h6><p><img src="https://phpspreadsheet.readthedocs.io/en/latest/topics/images/01-schematic.png" alt="01-schematic.png"></p>
<h6 id="Creating-a-spreadsheet"><a href="#Creating-a-spreadsheet" class="headerlink" title="Creating a spreadsheet"></a>Creating a spreadsheet</h6><p>Loading a Workbook from a file:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$inputFileName = <span class="string">'./sampleData/example1.xls'</span>;</span><br><span class="line"><span class="comment">/** Load $inputFileName to a Spreadsheet object **/</span></span><br><span class="line">$spreadsheet = \PhpOffice\PhpSpreadsheet\IOFactory::load($inputFileName);</span><br></pre></td></tr></table></figure>
<p>Creating a new workbook:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Create a new Spreadsheet Object **/</span></span><br><span class="line">$spreadsheet = <span class="keyword">new</span> \PhpOffice\PhpSpreadsheet\Spreadsheet();</span><br></pre></td></tr></table></figure>
<h6 id="Accessing-cells"><a href="#Accessing-cells" class="headerlink" title="Accessing cells"></a>Accessing cells</h6><p>Setting a cell value by coordinate:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set cell A1 with a string value</span></span><br><span class="line">$spreadsheet-&gt;getActiveSheet()-&gt;setCellValue(<span class="string">'A1'</span>, <span class="string">'PhpSpreadsheet'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set cell A2 with a numeric value</span></span><br><span class="line">$spreadsheet-&gt;getActiveSheet()-&gt;setCellValue(<span class="string">'A2'</span>, <span class="number">12345.6789</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set cell A3 with a boolean value</span></span><br><span class="line">$spreadsheet-&gt;getActiveSheet()-&gt;setCellValue(<span class="string">'A3'</span>, <span class="keyword">TRUE</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Set cell A4 with a formula</span></span><br><span class="line">$spreadsheet-&gt;getActiveSheet()-&gt;setCellValue(</span><br><span class="line">    <span class="string">'A4'</span>,</span><br><span class="line">    <span class="string">'=IF(A3, CONCATENATE(A1, " ", A2), CONCATENATE(A2, " ", A1))'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">$spreadsheet-&gt;getActiveSheet()</span><br><span class="line">    -&gt;getCell(<span class="string">'B8'</span>)</span><br><span class="line">    -&gt;setValue(<span class="string">'Some value'</span>);</span><br></pre></td></tr></table></figure>
<p><a href="https://phpoffice.github.io/PhpSpreadsheet/namespaces/phpoffice-phpspreadsheet.html" target="_blank" rel="noopener">Documentation</a></p>
<h4 id="PHPWord"><a href="#PHPWord" class="headerlink" title="PHPWord"></a>PHPWord</h4><p>The current version of PHPWord supports Microsoft Office Open XML (OOXML or OpenXML), OASIS Open Document Format for Office Applications (OpenDocument or ODF), and Rich Text Format (RTF).</p>
<p>PHPWord requires the following:</p>
<ul>
<li>PHP 5.3.3+</li>
<li>XML Parser extension</li>
<li>Zend\Escaper component</li>
<li>Zend\Stdlib component</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require_once</span> <span class="string">'bootstrap.php'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Creating the new document...</span></span><br><span class="line">$phpWord = <span class="keyword">new</span> \PhpOffice\PhpWord\PhpWord();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* <span class="doctag">Note:</span> any element you append to a document must reside inside of a Section. */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Adding an empty Section to the document...</span></span><br><span class="line">$section = $phpWord-&gt;addSection();</span><br><span class="line"><span class="comment">// Adding Text element to the Section having font styled by default...</span></span><br><span class="line">$section-&gt;addText(</span><br><span class="line">    <span class="string">'"Learn from yesterday, live for today, hope for tomorrow. '</span></span><br><span class="line">        . <span class="string">'The important thing is not to stop questioning." '</span></span><br><span class="line">        . <span class="string">'(Albert Einstein)'</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Saving the document as OOXML file...</span></span><br><span class="line">$objWriter = \PhpOffice\PhpWord\IOFactory::createWriter($phpWord, <span class="string">'Word2007'</span>);</span><br><span class="line">$objWriter-&gt;save(<span class="string">'helloWorld.docx'</span>);</span><br></pre></td></tr></table></figure>
<p>前端发起ajax请求，后端生成excel并下载，同时需要在header头中，带上token验证信息，实现如下：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$filename = <span class="string">'demo.xlsx'</span>;</span><br><span class="line">$objWriter = \PHPExcel_IOFactory::createWriter($objectPHPExcel, <span class="string">'Excel2007'</span>);</span><br><span class="line">ob_start();</span><br><span class="line">$objWriter-&gt;save(<span class="string">"php://output"</span>);</span><br><span class="line">$xlsData = ob_get_contents();</span><br><span class="line">ob_end_clean();</span><br><span class="line"><span class="keyword">return</span> Api::success([<span class="string">'filename'</span> =&gt; $filename, <span class="string">'file'</span> =&gt; <span class="string">"data:application/vnd.ms-excel;base64,"</span> . base64_encode($xlsData)]);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.download'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">"http://xxxx.com/group/bi/export"</span>;</span><br><span class="line"><span class="keyword">var</span> params = &#123;</span><br><span class="line">    from_date: <span class="string">'2017-09-01'</span>,</span><br><span class="line">    to_date: <span class="string">'2017-09-08'</span>,</span><br><span class="line">    group_id: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type:<span class="string">'POST'</span>,</span><br><span class="line">        url: url,</span><br><span class="line">        data: params,</span><br><span class="line">        beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">            request.setRequestHeader(<span class="string">"Authorization"</span>, <span class="string">"token信息，验证身份"</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">redata</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 创建a标签，设置属性，并触发点击下载</span></span><br><span class="line">            <span class="keyword">var</span> $a = $(<span class="string">"&lt;a&gt;"</span>);</span><br><span class="line">            $a.attr(<span class="string">"href"</span>, redata.data.file);</span><br><span class="line">            $a.attr(<span class="string">"download"</span>, redata.data.filename);</span><br><span class="line">            $(<span class="string">"body"</span>).append($a);</span><br><span class="line">            $a[<span class="number">0</span>].click();</span><br><span class="line">            $a.remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://www.jb51.net/special/339.htm" target="_blank" rel="noopener">PHP 操作 office 文档</a></p>
<h4 id="vue使用FormData上传excel文件，使用blob下载文件"><a href="#vue使用FormData上传excel文件，使用blob下载文件" class="headerlink" title="vue使用FormData上传excel文件，使用blob下载文件"></a>vue使用FormData上传excel文件，使用blob下载文件</h4><p> BLOB (binary large object) 二进制大对象</p>
<h5 id="导入excel文件"><a href="#导入excel文件" class="headerlink" title="导入excel文件"></a>导入excel文件</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">inputCustomProduct(e)&#123;</span><br><span class="line">                <span class="comment">//声明一个FormDate对象</span></span><br><span class="line">                <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">                <span class="keyword">let</span> file = e.target.files[<span class="number">0</span>]</span><br><span class="line">                <span class="comment">//把文件信息放入对象中</span></span><br><span class="line">                formData.append( <span class="string">"excelFile"</span>, file);</span><br><span class="line">                <span class="comment">// let params = new URLSearchParams(formData)     //当请求没有转换成formData时使用</span></span><br><span class="line">                <span class="keyword">if</span>(file.type == <span class="string">"application/vnd.ms-excel"</span> || file.type == <span class="string">"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"</span>)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.$ajax(&#123;</span><br><span class="line">                        method: <span class="string">"post"</span>,</span><br><span class="line">                        url: <span class="string">""</span>,</span><br><span class="line">                        data: formData,</span><br><span class="line">                        headers: &#123;</span><br><span class="line">                            <span class="string">'Content-Type'</span>: <span class="string">'multipart/form-data'</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;).then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span>(res.code === <span class="number">200</span>)&#123;</span><br><span class="line">                            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                                message: <span class="string">"导入成功"</span>,</span><br><span class="line">                                type: <span class="string">"success"</span></span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                                message: <span class="string">"导入失败"</span>,</span><br><span class="line">                                type: <span class="string">"error"</span></span><br><span class="line">                            &#125;)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                        message: <span class="string">"请选择excel文件！"</span>,</span><br><span class="line">                        type: <span class="string">"error"</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//此处必须将控制导入的input值进行置空，否则不会触发change事件，会导致同一个文件不能二次导入</span></span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'up'</span>).value = <span class="literal">null</span>;</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h5 id="导出Excel"><a href="#导出Excel" class="headerlink" title="导出Excel"></a>导出Excel</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">outputCustomProduct() &#123;</span><br><span class="line">                <span class="keyword">this</span>.$ajax(&#123;</span><br><span class="line">                    method: <span class="string">""</span>,</span><br><span class="line">                    url: <span class="string">""</span>,</span><br><span class="line">                    params: &#123;</span><br><span class="line">                       </span><br><span class="line">                    &#125;,</span><br><span class="line">                    responseType: <span class="string">'blob'</span></span><br><span class="line">                &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(res)</span><br><span class="line">                    <span class="comment">//调用成功，在html中创建一个a元素</span></span><br><span class="line">                    <span class="keyword">let</span> aTag = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">                    <span class="comment">//创建一个blob对象</span></span><br><span class="line">                    <span class="keyword">let</span> blob = <span class="keyword">new</span> Blob([res], &#123;</span><br><span class="line">                        <span class="comment">//Excel文件版本</span></span><br><span class="line">                        type: <span class="string">"multipart/form-data;charset=utf-8"</span>,   <span class="comment">//application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</span></span><br><span class="line">                    &#125;);<span class="comment">// 这个content是下载的文件内容，自己修改</span></span><br><span class="line">                    aTag.download = <span class="string">'订单导入模板.xls'</span>;<span class="comment">// 下载的文件名</span></span><br><span class="line">                    aTag.href = <span class="built_in">window</span>.URL.createObjectURL(blob);   <span class="comment">//创建一个URL对象</span></span><br><span class="line">                    aTag.click();</span><br><span class="line">                    <span class="built_in">document</span>.body.removeChild(aTag)</span><br><span class="line">                    <span class="built_in">window</span>.URL.revokeObjectURL(blob);          <span class="comment">//释放URL对象</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="Vue-Element-UI-实现文件excel的上传及下载2种方式（文件流及a标签）"><a href="#Vue-Element-UI-实现文件excel的上传及下载2种方式（文件流及a标签）" class="headerlink" title="Vue Element UI 实现文件excel的上传及下载2种方式（文件流及a标签）"></a>Vue Element UI 实现文件excel的上传及下载2种方式（文件流及a标签）</h4><p><strong>上传</strong>使用Element ui 里的 el-upload</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;上传&quot;&gt;</span><br><span class="line">   &lt;el-upload</span><br><span class="line">     class=&quot;upload-demo&quot;</span><br><span class="line">     ref=&quot;upload&quot;</span><br><span class="line">     action=&quot;#&quot;</span><br><span class="line">     :limit=&quot;1&quot;</span><br><span class="line">     :http-request=&quot;uploadOk&quot;</span><br><span class="line">     :on-preview=&quot;handlePreview&quot;</span><br><span class="line">     :before-upload=&quot;beforeAvatarUpload&quot;</span><br><span class="line">     :on-remove=&quot;handleRemove&quot;</span><br><span class="line">     :file-list=&quot;fileList&quot;</span><br><span class="line">     :auto-upload=&quot;true&quot;&gt;</span><br><span class="line">     &lt;el-button slot=&quot;trigger&quot; size=&quot;small&quot; type=&quot;primary&quot;&gt;选取文件&lt;/el-button&gt;</span><br><span class="line">     &lt;div slot=&quot;tip&quot; class=&quot;el-upload__tip&quot;&gt;只能上传xls/xlsx文件&lt;/div&gt;</span><br><span class="line">   &lt;/el-upload&gt;</span><br><span class="line"> &lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>action 必选参数，上传的地址<br>:limit 最大允许上传个数<br>:http-request 覆盖默认的上传行为，自定义上传<br>:on-preview 文件上传时的钩子<br>:before-upload 上传文件之前的钩子<br>:on-remove 文件列表移除文件时的钩子<br>:file-list 上传的文件列表<br>:auto-upload 是否在选取文件后立即进行上传</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// 上传前验证</span></span><br><span class="line">beforeAvatarUpload(file) &#123;</span><br><span class="line">  <span class="keyword">let</span> Xls = file.name.split(<span class="string">'.'</span>); </span><br><span class="line">  <span class="keyword">if</span>(Xls[<span class="number">1</span>] === <span class="string">'xls'</span>||Xls[<span class="number">1</span>] === <span class="string">'xlsx'</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> file</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$message.error(<span class="string">'上传文件只能是 xls/xlsx 格式!'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">handleRemove(file, fileList) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(file, fileList);</span><br><span class="line">&#125;,</span><br><span class="line">handlePreview(file) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(file);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 上传成功</span></span><br><span class="line">uploadOk(val)&#123;</span><br><span class="line">  <span class="keyword">let</span> fd = <span class="keyword">new</span> FormData() <span class="comment">// 上传文件必须为FormData 所以这边New FormData() ，把上传文件的File填进去。</span></span><br><span class="line">  fd.append(<span class="string">'upload_file'</span>,val.file)</span><br><span class="line">  fd.append(<span class="string">'dir_name'</span>,<span class="string">'contract'</span>)</span><br><span class="line">  <span class="comment">// console.log(fd.upload_file)  错误</span></span><br><span class="line">  <span class="comment">// console.log(fd.get("upload_file")  正确</span></span><br><span class="line">  <span class="keyword">this</span>.$post(<span class="string">'/upload/uploadFile'</span>, fd).then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">        message: <span class="string">'上传成功'</span>,</span><br><span class="line">        type: <span class="string">'success'</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// 接收excel文件地址</span></span><br><span class="line">      <span class="keyword">this</span>.addForm.addurl = result.data.file_url</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.message(result.msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h5><p>a标签方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下载源文件</span></span><br><span class="line">  handleDownload: <span class="function"><span class="keyword">function</span>(<span class="params">index, row</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(row.contract_file_url == <span class="string">''</span>)&#123;</span><br><span class="line">      <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">        message: <span class="string">'没有源文件'</span>,</span><br><span class="line">        type: <span class="string">'warning'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">// 创建 a 标签 </span></span><br><span class="line">      <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>)</span><br><span class="line">      <span class="comment">// href 链接, row.contract_file_url 是从表格里拿到的下载文件地址</span></span><br><span class="line">      link.setAttribute(<span class="string">'href'</span>, row.contract_file_url)</span><br><span class="line">      <span class="comment">// 自执行点击事件</span></span><br><span class="line">      link.click()</span><br><span class="line">    &#125;   </span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/28/BT-interview-note-iii/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/28/BT-interview-note-iii/" class="post-title-link" itemprop="url">BT-interview-note-iii</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-28 13:17:39 / 修改时间：13:18:26" itemprop="dateCreated datePublished" datetime="2020-11-28T13:17:39+08:00">2020-11-28</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>redis</p>
<p>java 垃圾回收机制</p>
<p>tcp 和 udp 的区别</p>
<p>项目的框架，数据库表和模型、控制器</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/28/BT-interview-note-ii/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/28/BT-interview-note-ii/" class="post-title-link" itemprop="url">BT-interview-note-ii</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-28 11:24:36" itemprop="dateCreated datePublished" datetime="2020-11-28T11:24:36+08:00">2020-11-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-01 17:14:23" itemprop="dateModified" datetime="2020-12-01T17:14:23+08:00">2020-12-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h4><h4 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h4><h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><h5 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h5><p><strong>多态</strong>是同一个行为具有多个不同表现形式或形态的能力。即同一个接口，使用不同的实例而执行不同操作。多态是设计模式中的策略模式的关键。</p>
<p><strong>设计模式</strong>是软件开发人员在软件开发过程中遇到的一般问题的解决方案、经验总结。设计模式代表着最佳的实践。<a href="https://www.runoob.com/design-pattern/design-pattern-intro.html" target="_blank" rel="noopener">参考书</a>中提到的有 23 种设计模式，比如工厂模式、单例模式、代理模式、策略模式、MVC 模式等。</p>
<p><strong>策略模式</strong>指一个类的行为或其算法可以在运行时更改。策略模式使用的是面向对象的继承和多态机制。<em>Context</em> 是一个使用了某种策略的类，策略模式的实现：</p>
<ol>
<li>创建一个接口 Strategy </li>
<li>创建接口的实体类</li>
<li>创建 Context 类</li>
<li>使用 Context 来查看当它改变策略 Strategy 时的行为变化。</li>
</ol>
<p><img src="https://img2018.cnblogs.com/blog/1422237/201810/1422237-20181016104150713-1037928372.png" alt="img"></p>
<h5 id="垃圾回收"><a href="#垃圾回收" class="headerlink" title="垃圾回收"></a>垃圾回收</h5><p><strong>分代</strong>是指 Java 虚拟机根据对象存活的周期不同，将堆内存划分为新生代（细分为伊甸区、幸存者区）和老年代。根据各个代的特点采用最适合的收集算法。在新生代中，每次垃圾收集时都发现有大批对象死去，只有少量存活，那就选用复制算法，只需要付出少量存活对象的复制成本就可以完成。而老年代中因为对象存活率高、没有额外空间对他进行分配担保，就必须使用“标记-清理”或者“标记-整理”算法来进行回收。</p>
<p><strong>垃圾回收算法：</strong></p>
<ol>
<li>复制算法：将内存区域划分成相同的两个<strong>内存块</strong>。每次仅使用一半的空间，<code>JVM</code>生成的新对象放在一半空间中。当一半空间用完时进行<code>GC</code>，把可到达对象复制到另一半空间，然后把使用过的内存空间一次清理掉。新生区的对象往往内存较小，可以使用复制算法，将对象复制到另一半内存上就可以清除，不会造成内存碎片。</li>
<li>标记-清除算法：标记-清除算法对<strong>根集合</strong>进行扫描，对<strong>存活</strong>的对象进行标记。标记完成后，再对整个空间内<strong>未被标记</strong>的对象扫描，进行回收。不需要进行对象进行移动。标记、清除过程效率低，产生大量不连续的内存碎片，提高了垃圾回收的频率。</li>
<li>标记-整理算法：进行对象的标记，但后续不直接对可回收对象进行清理，而是将所有的<strong>存活对象</strong>往一端<strong>空闲空间</strong>移动，然后清理掉端边界以外的内存空间。解决了标记-清理算法存在的内存碎片问题。仍需要进行局部对象移动，一定程度上降低了效率。</li>
</ol>
<h5 id="Spring-IOC"><a href="#Spring-IOC" class="headerlink" title="Spring IOC"></a>Spring IOC</h5><p>开发者使用Spring框架主要是做两件事：①开发Bean；②配置Bean。对于Spring框架来说，它要做的就是根据配置文件来创建Bean实例，并调用Bean实例的方法完成”依赖注入”——这就是所谓IoC的本质。</p>
<blockquote>
<p>IOC is Inversion Of Control. It means that the application won’t manage it’s lifecycle/flow of control itself. The framework (Spring) will. So you just tell the framework how you want (some) elements of your app to work together.</p>
<p>DI is dependency injection. It’s a specific kind of IOC where the framework will manage the dependencies that an object uses (you can call dependency: a service).</p>
<p>Bean is an object managed by the Framework.</p>
</blockquote>
<h5 id="map"><a href="#map" class="headerlink" title="map"></a>map</h5><p><strong>map</strong>：存储键值对，</p>
<p>hashmap的实现原理</p>
<p>rehash</p>
<h5 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h5><p>threadLocal的实现原理；线程池的实现原理，线程运行完run方法就被回收了吗，用什么数据结构存储任务，blockingQueue；并发锁的实现；</p>
<h4 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h4><p>创建三个线程，按序输出1, 2, 3 （\lab\ref\backend\src\main\java\test\t1.java）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">t1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock lock=<span class="keyword">new</span> ReentrantLock();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> state=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Worker a=<span class="keyword">new</span> Worker(<span class="number">3</span>,<span class="number">0</span>);</span><br><span class="line">    Worker b=<span class="keyword">new</span> Worker(<span class="number">3</span>,<span class="number">1</span>);</span><br><span class="line">    Worker c=<span class="keyword">new</span> Worker(<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">    a.start();</span><br><span class="line">    b.start();</span><br><span class="line">    c.start();</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mod;</span><br><span class="line">        <span class="keyword">int</span> v;</span><br><span class="line"></span><br><span class="line">        Worker(<span class="keyword">int</span> mod,<span class="keyword">int</span> v)&#123;</span><br><span class="line">            <span class="keyword">this</span>.mod=mod;</span><br><span class="line">            <span class="keyword">this</span>.v=v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                lock.lock();</span><br><span class="line">                <span class="keyword">if</span>(state%mod==v)&#123;</span><br><span class="line">                    System.out.println(v+<span class="number">1</span>);</span><br><span class="line">                    state++;</span><br><span class="line">                &#125;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是这样的代码中有忙等待，性能很低，随着线程数数量增加的话，这样的程序是不适用的。</p>
<h4 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h4><p>http报文的结构，contentType字段是什么意思；http和https的区别，https是如何交换密钥的，客户端如何知道服务器可信 如何验证ca证书可信，为什么使用对称加密结合非对称加密；</p>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><p>非主键索引和主键索引的区别；回表；主键索引是必须的吗；主键索引一般是用什么数据结构，为什么使用b+树；乐观锁是什么，如何实现，IO次数；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/22/BT-interview-note-i/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/22/BT-interview-note-i/" class="post-title-link" itemprop="url">BT-interview-note-i</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-22 23:12:00" itemprop="dateCreated datePublished" datetime="2020-11-22T23:12:00+08:00">2020-11-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-11-23 00:08:05" itemprop="dateModified" datetime="2020-11-23T00:08:05+08:00">2020-11-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="字节跳动飞书后端一面"><a href="#字节跳动飞书后端一面" class="headerlink" title="字节跳动飞书后端一面"></a>字节跳动飞书后端一面</h4><p>上来先自我介绍，再问掌握的==技术栈==。然后开始问基础知识：</p>
<h5 id="Java的反射机制"><a href="#Java的反射机制" class="headerlink" title="Java的反射机制"></a>Java的反射机制</h5><p>Java的反射（Reflection）机制提供动态获取类的信息，以及动态调用对象的方法的功能。反射机制的几大功能：==在运行时==，</p>
<ul>
<li>判断任意一个对象所属类。</li>
<li>构造任意一个对象。</li>
<li>判断任意一个类所具备的成员变量和方法</li>
<li><p>调用任意一个对象的方法。</p>
<p>通常而言：程序运行时容许改变程序结构和变量类型称为动态语言。因而可知Java并非动态语言，可是Java的Reflection机制，能够运行时加载、探知、使用编译期间彻底未知classes。因此Reflection是Java视为动态语言的关键性质，容许在程序运行时经过Reflection APIs 取得任何一个已知名称的class的内部信息（包括父类，接口，变量，方法等）。</p>
</li>
</ul>
<p>IOC：Inversion of Control —— 控制反转，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象。</p>
<p>DI：Dependency Injection —— 依赖注入，在系统运行中，动态的向某个对象提供它所需要的其他对象。</p>
<p>AOP —— Asepct-Orentid-Programming，面向切面编程，把与核心业务逻辑无关的代码全部抽取出来，放置到某个地方集中管理，然后在具体运行时，再由容器动态织入这些共有代码。</p>
<h5 id="Java虚拟机内存回收机制，什么是Full-GC，如何避免Full-GC"><a href="#Java虚拟机内存回收机制，什么是Full-GC，如何避免Full-GC" class="headerlink" title="Java虚拟机内存回收机制，什么是Full GC，如何避免Full GC"></a>Java虚拟机内存回收机制，什么是Full GC，如何避免Full GC</h5><p>堆内存划分为 Eden、Survivor 和 Tenured/Old 空间。</p>
<ul>
<li>从年轻代空间（包括 Eden 和 Survivor 区域）回收内存被称为 Minor GC；</li>
<li>对老年代GC称为Major GC；</li>
<li>而Full GC是对整个堆来说的；</li>
</ul>
<p>发生Full GC的情况及避免方法：</p>
<ol>
<li>直接调用System.gc</li>
<li>旧生代空间不足。调优时应尽量做到让对象在Minor GC阶段被回收、让对象在新生代多存活一段时间及不要创建过大的对象及数组。</li>
<li>Permanet Generation空间满。增大Perm Gen空间或转为使用CMS GC。</li>
<li>CMS GC时出现promotion failed和concurrent mode failure。增大survivorspace、旧生代空间或调低触发并发GC的比率。</li>
<li>统计得到的Minor GC晋升到旧生代的平均大小大于旧生代的剩余空间</li>
<li>对于使用RMI来进行RPC或管理的Sun JDK应用而言，默认情况下会一小时执行一次Full GC</li>
</ol>
<h5 id="http和https什么区别"><a href="#http和https什么区别" class="headerlink" title="http和https什么区别"></a>http和https什么区别</h5><p><a href="https://blog.csdn.net/xionghuixionghui/article/details/68569282" target="_blank" rel="noopener">https://blog.csdn.net/xionghuixionghui/article/details/68569282</a></p>
<p>1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。</p>
<p>2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。</p>
<p>3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p>
<p>4、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。</p>
<p>（好像还问了一道网络题，记不清了……）</p>
<h5 id="什么是跨域问题？如何解决跨域问题？"><a href="#什么是跨域问题？如何解决跨域问题？" class="headerlink" title="什么是跨域问题？如何解决跨域问题？"></a>什么是跨域问题？如何解决跨域问题？</h5><p>由浏览器的同源策略造成。同源是指，域名，协议，端口均相同。</p>
<p>解决方法：</p>
<ol>
<li>JSONP</li>
<li>代理</li>
<li>PHP端修改header（XHR2方式）</li>
</ol>
<h5 id="算法：二分查找"><a href="#算法：二分查找" class="headerlink" title="算法：二分查找"></a>算法：二分查找</h5><p>是指在有序数组中查找某一特定元素的算法。搜索过程从数组的中间元素开始，如果中间元素正好是要查找的元素，则搜索过程结束;如果特定元素大于或者小于中间元素,则在数组大于或小于中间元素的那一半中查找，且跟开始一样从中间元素开始比较。如果在某一步骤数组为空,则代表找不到。这种搜索算法每-次比较都使搜索范围缩小一半。</p>
<h5 id="索引是什么？索引过多会出现什么问题？"><a href="#索引是什么？索引过多会出现什么问题？" class="headerlink" title="索引是什么？索引过多会出现什么问题？"></a>索引是什么？索引过多会出现什么问题？</h5><p>索引是关系数据库中对某一列或多个列的值进行预排序的数据结构。通过使用索引，可以让数据库系统不必扫描整个表，而是直接定位到符合条件的记录，这样就大大加快了查询速度。</p>
<p>1.一个索引会在update或insert时增加一次I/O, 对于操作系统底层来说是非常损耗性能的。<br>2.索引过多会导致索引文件过大， 系统在寻址时查询时间增长。</p>
<p>在表上建立的每个索引都会增加存储开销，索引对于插入、删除、更新操作也会增加处理上的开销。另外，过多的复合索引，在有单字段索引的情况下，一般都是没有存在价值的；相反，还会降低数据增加删除时的性能，特别是对频繁更新的表来说，负面影响更大。</p>
<h5 id="hashmap-数据结构"><a href="#hashmap-数据结构" class="headerlink" title="hashmap 数据结构"></a>hashmap 数据结构</h5><font color="grey">真 每次必问啊</font>

<p>hasnmap是一个链表的数组，对于每个 key-value对元素，根据其key的哈希，该元素被分配到某个桶当中，桶使用链表实现，链表的节点包含了一个key，一个value，以及一个指向下一个节点的指针。当桶的大小大于8时会转化为红黑树存储数据。</p>
<p><img src="https://img-blog.csdn.net/20180811174815551?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYW5nZV96aA==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<ul>
<li><a href="https://blog.csdn.net/jiange_zh/article/details/81588983" target="_blank" rel="noopener">https://blog.csdn.net/jiange_zh/article/details/81588983</a></li>
<li><a href="https://blog.csdn.net/daiyuhe/article/details/89424736" target="_blank" rel="noopener">https://blog.csdn.net/daiyuhe/article/details/89424736</a></li>
</ul>
<p><a href="https://www.jianshu.com/p/8b372f3a195d" target="_blank" rel="noopener">https://www.jianshu.com/p/8b372f3a195d</a></p>
<h5 id="你对飞书怎么看？有没有了解过飞书的开放平台？"><a href="#你对飞书怎么看？有没有了解过飞书的开放平台？" class="headerlink" title="你对飞书怎么看？有没有了解过飞书的开放平台？"></a>你对飞书怎么看？有没有了解过飞书的开放平台？</h5><p><del>我不想看</del><a href="https://www.feishu.cn/product/overview" target="_blank" rel="noopener">https://www.feishu.cn/product/overview</a></p>
<p><del>没有，下次一定</del><a href="https://www.feishu.cn/webinar/feishu-openapi" target="_blank" rel="noopener">https://www.feishu.cn/webinar/feishu-openapi</a></p>
<font color="grey">居然只面了十五分钟？？就挺突然的。而且用的是飞书视频，没有考编程？？算法题 也挺 意外的……整理之后发现一半的题目回答都有点凉啊</font>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/21/spider-for-hiresearch/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/21/spider-for-hiresearch/" class="post-title-link" itemprop="url">spider for hiresearch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-21 08:41:55 / 修改时间：10:57:22" itemprop="dateCreated datePublished" datetime="2020-11-21T08:41:55+08:00">2020-11-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><code>xlrd</code> 是python环境下对excel中的数据进行读取的一个模板，可以进行的操作有：</p>
<ul>
<li>读取有效单元格的行数、列数</li>
<li>读取指定行（列）的所有单元格的值</li>
<li>读取指定单元格的值</li>
<li>读取指定单元格的数据类型</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 78</span><br></pre></td></tr></table></figure>
<p>调整ChromeDriver版本，下载chromedriver.exe放到Script文件夹下。</p>
<p>Code from JZ : </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlrd</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line">subject = <span class="string">'基因'</span></span><br><span class="line">lang = <span class="string">'中文'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取excel中的信息, 然后根据信息爬虫</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 打开浏览器</span></span><br><span class="line">    url = <span class="string">'http://www.hiresearch.cn/pcomp'</span></span><br><span class="line">    browser = webdriver.Chrome()</span><br><span class="line">    browser.get(url)</span><br><span class="line">    browser.maximize_window()</span><br><span class="line">    <span class="comment"># 先添加两个搜索框</span></span><br><span class="line">    add_element = browser.find_element_by_xpath(<span class="string">'//*[@id="logic_1"]/div[1]/a'</span>)</span><br><span class="line">    add_element.click()</span><br><span class="line">    add_element.click()</span><br><span class="line">    <span class="comment"># 输入主题</span></span><br><span class="line">    subject_text = browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword1"]'</span>)</span><br><span class="line">    subject_text.click()</span><br><span class="line">    subject_text.send_keys(subject)</span><br><span class="line">    <span class="comment"># 语言全选按钮</span></span><br><span class="line">    all_lan = browser.find_element_by_xpath(<span class="string">'//*[@id="searchForm"]/div[3]/div/div[4]/div[2]/div/div[1]/div/div/label'</span>)</span><br><span class="line">    all_lan.click()</span><br><span class="line">    <span class="comment"># 中文按钮</span></span><br><span class="line">    ch = browser.find_element_by_xpath(<span class="string">'//*[@id="lblcn"]'</span>)</span><br><span class="line">    ch.click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 选择类别</span></span><br><span class="line">    Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltType2"]'</span>)).select_by_visible_text(<span class="string">'基金名称'</span>)</span><br><span class="line">    Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltType3"]'</span>)).select_by_visible_text(<span class="string">'基金类别'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 选择年份</span></span><br><span class="line">    browser.find_element_by_xpath(<span class="string">'//*[@id="limit_bar"]'</span>).click()</span><br><span class="line">    browser.find_element_by_xpath(<span class="string">'//*[@id="rangeYear"]'</span>).click()</span><br><span class="line">    <span class="comment"># 读取信息</span></span><br><span class="line">    name = <span class="string">'limit-pcy.xlsx'</span></span><br><span class="line">    wb = xlrd.open_workbook(filename=name)  <span class="comment"># 打开文件</span></span><br><span class="line"></span><br><span class="line">    sheet1 = wb.sheet_by_index(<span class="number">0</span>)  <span class="comment"># 通过索引获取表格</span></span><br><span class="line">    type1s = sheet1.col_values(<span class="number">2</span>)  <span class="comment"># 获取类别</span></span><br><span class="line">    type2s = sheet1.col_values(<span class="number">3</span>)  <span class="comment"># 获取自类别</span></span><br><span class="line">    years = sheet1.col_values(<span class="number">4</span>)  <span class="comment"># 年份</span></span><br><span class="line">    counts = sheet1.col_values(<span class="number">5</span>)  <span class="comment"># 数量</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    beq = <span class="number">0</span></span><br><span class="line">    end = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; len(years):</span><br><span class="line">        type1 = type1s[i]</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).clear()</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).click()</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).send_keys(type1)</span><br><span class="line">        type2 = type2s[i]</span><br><span class="line">        <span class="keyword">if</span> len(type2) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).clear()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).send_keys(type2)</span><br><span class="line">            <span class="keyword">except</span> Exception:</span><br><span class="line">                add_element.click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).clear()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).send_keys(type2)</span><br><span class="line">        year = years[i]</span><br><span class="line">        <span class="keyword">if</span> type(year) == float:</span><br><span class="line">            beq = end = int(year)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ss = year.split(<span class="string">'-'</span>)</span><br><span class="line">            beq = int(ss[<span class="number">0</span>])</span><br><span class="line">            end = int(ss[<span class="number">1</span>])</span><br><span class="line">        <span class="comment"># 如果年份有-需要处理一下</span></span><br><span class="line">        Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltBeginYear"]'</span>)).select_by_visible_text(str(beq))</span><br><span class="line">        Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltEndYear"]'</span>)).select_by_visible_text(str(end))</span><br><span class="line">        <span class="comment"># 开始检索</span></span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="btnsearch1"]'</span>).click()</span><br><span class="line">        count = int(counts[i])</span><br><span class="line">        sleep(<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># 从1到count</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range((count + <span class="number">99</span>) // <span class="number">100</span>):</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="tabExport"]'</span>).click()</span><br><span class="line">            Select(browser.find_element_by_xpath(<span class="string">'//*[@id="modalExport"]'</span>)).select_by_visible_text(<span class="string">'项目 + 所有成果'</span>)</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).clear()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).click()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).send_keys(j * <span class="number">100</span> + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).clear()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).click()</span><br><span class="line">            <span class="keyword">if</span> count &gt;= j * <span class="number">100</span> + <span class="number">100</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).send_keys(j * <span class="number">100</span> + <span class="number">100</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).send_keys(count)</span><br><span class="line"></span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalBtnExport"]'</span>).click()</span><br><span class="line">            sleep(<span class="number">3</span>)</span><br><span class="line">        print(type1, type2, beq, end, count)</span><br><span class="line">        handle = browser.current_window_handle</span><br><span class="line">        handles = browser.window_handles</span><br><span class="line">        <span class="keyword">for</span> newhandle <span class="keyword">in</span> handles:</span><br><span class="line">            <span class="comment"># 筛选新打开的窗口B</span></span><br><span class="line">            <span class="keyword">if</span> newhandle != handle:</span><br><span class="line">                browser.switch_to_window(newhandle)</span><br><span class="line">                browser.close()</span><br><span class="line">        browser.switch_to_window(handle)</span><br><span class="line">        sleep(<span class="number">10</span>)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">'success!'</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/20/数的子结构/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/20/数的子结构/" class="post-title-link" itemprop="url">数的子结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-20 09:47:35 / 修改时间：09:59:54" itemprop="dateCreated datePublished" datetime="2020-11-20T09:47:35+08:00">2020-11-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>输入两棵二叉树A和B，判断B是不是A的子结构。(约定空树不是任意一个树的子结构)</p>
<p>B是A的子结构， 即 A中有出现和B相同的结构和节点值。</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><p>树的问题，递归解决。题目未说明是否会出现数值相同的节点</p>
<ol>
<li>是左子树的子树；2. 是右子树的子树；3. 从根节点重合</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSub</span><span class="params">(TreeNode* A, TreeNode* B)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//从根节点重合</span></span><br><span class="line">        <span class="keyword">if</span>(B==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(A==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(A-&gt;val==B-&gt;val)</span><br><span class="line">            <span class="keyword">return</span> isSub(A-&gt;left,B-&gt;left)&amp;&amp;isSub(A-&gt;right,B-&gt;right);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSubStructure</span><span class="params">(TreeNode* A, TreeNode* B)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// "约定空树不是任意一个树的子结构"实际上不利于编程</span></span><br><span class="line">        <span class="keyword">if</span>(B==<span class="literal">NULL</span>||A==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> isSub(A,B) || isSubStructure(A-&gt;left,B) || isSubStructure(A-&gt;right,B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/分数排名/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/分数排名/" class="post-title-link" itemprop="url">分数排名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-27 16:43:44" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:44+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>编写一个 SQL 查询来实现分数排名。如果两个分数相同，则两个分数排名（Rank）相同。请注意，平分后的下一个名次应该是下一个连续的整数值。换句话说，名次之间不应该有“间隔”。</p>
<p><strong>提示：</strong>对于 MySQL 解决方案，如果要转义用作列名的保留字，可以在关键字之前和之后使用撇号。例如 <strong>`Rank`</strong></p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Score, <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">by</span> Score <span class="keyword">DESC</span>) <span class="keyword">as</span> <span class="string">`Rank`</span> <span class="keyword">from</span> Scores</span><br></pre></td></tr></table></figure>
<h3 id="sql排名函数-ROW-NUMBER、RANK、DENSE-RANK、NTILE"><a href="#sql排名函数-ROW-NUMBER、RANK、DENSE-RANK、NTILE" class="headerlink" title="sql排名函数(ROW_NUMBER、RANK、DENSE_RANK、NTILE)"></a>sql排名函数(ROW_NUMBER、RANK、DENSE_RANK、NTILE)</h3><p>排号从1开始，都需要有 over (order by …) 子句。<a href="https://www.cnblogs.com/52xf/p/4209211.html" target="_blank" rel="noopener">https://www.cnblogs.com/52xf/p/4209211.html</a></p>
<p>案例：</p>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_data.png" alt="表结构和初始数据-晓菜鸟"></p>
<h4 id="ROW-NUMBER"><a href="#ROW-NUMBER" class="headerlink" title="ROW_NUMBER"></a>ROW_NUMBER</h4><p>根据over子句对某一列排序，按照over子句排序结果为查询出来的每一行记录生成一个序号，依次排号且不重复。</p>
<p>over子句与order by子句互不影响。如下sql语句，按照SubTime降序编号，结果按照TotalPrice降序返回：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span>) <span class="keyword">as</span> row_num, * <span class="keyword">from</span> [<span class="keyword">Order</span>] <span class="keyword">order</span> <span class="keyword">by</span> [TotalPrice] <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<p>可用于实现web分页。根据订单提交时间倒序排列获取第三至第五条数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> orderSection <span class="keyword">as</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">select</span> ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span>) <span class="keyword">rownum</span>, * <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> [orderSection] <span class="keyword">where</span> <span class="keyword">rownum</span> <span class="keyword">between</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">5</span> <span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<h4 id="RANK"><a href="#RANK" class="headerlink" title="RANK"></a>RANK</h4><p>rank函数对于over子句中排序字段值相同的记录生成相同的序号，后面的记录的排号是基于当前的记录数，即：同一组的序号是一样的，下一组的序号是：上一组的序号+上一组的记录的数量-1.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [UserId]) <span class="keyword">as</span> <span class="keyword">rank</span>,* <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_rank_1.png" alt="使用rank函数排名-晓菜鸟"></p>
<h4 id="DENSE-RANK"><a href="#DENSE-RANK" class="headerlink" title="DENSE_RANK"></a>DENSE_RANK</h4><p>dense_rank与rank的区别在于dense_rank的排号是连续的，rank的排号可能不连续。在同一组中的记录排号相同。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [UserId]) <span class="keyword">as</span> den_rank,* <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_dense_rank.png" alt="使用dense_rank函数排名-晓菜鸟"></p>
<h4 id="NTILE"><a href="#NTILE" class="headerlink" title="NTILE"></a>NTILE</h4><p>ntile有一个参数用于指出桶数，将数据排序后进行装桶处理并编号。装桶及编号的规则：<a href="https://www.cnblogs.com/52xf/p/4209211.html" target="_blank" rel="noopener">https://www.cnblogs.com/52xf/p/4209211.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/nkoj-develop-note/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/nkoj-develop-note/" class="post-title-link" itemprop="url">nkoj-develop-note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-27 16:43:40" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:40+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="pm2和nodejs"><a href="#pm2和nodejs" class="headerlink" title="pm2和nodejs"></a>pm2和nodejs</h4><p>nodejs是javascript的运行环境，异步IO，支持高并发。</p>
<p>PM2 (Process Manager 2) 是JavaScript运行时Node.js的进程管理器。</p>
<h4 id="private、protected、public、static、final"><a href="#private、protected、public、static、final" class="headerlink" title="private、protected、public、static、final"></a>private、protected、public、static、final</h4><p>对任何类、方法、参数、变量，严格控制访问范围，这样有利于模块解耦。</p>
<ul>
<li><code>private</code> should be used when something is not used outside of a given class<ul>
<li>for methods and fields - when they are used only within the same class</li>
<li>for classes - only on nested classes, when used in the same class</li>
</ul>
</li>
<li><code>protected</code>should be used when<ul>
<li>for methods and field - when you need to make them accessible to subclasses only</li>
<li>for classes - again only nested classes, accessible by subcalsses</li>
</ul>
</li>
<li><p><code>public</code> is used when something is accessible by every other class</p>
</li>
<li><p><code>static</code> is used when you don’t need an instance of a class (i.e. object) to use it:</p>
<ul>
<li>for fields - when you want to have a global field</li>
<li>for methods - when you need utility functions that do not depend on object state</li>
<li>for nested classes - when you want to access them without an instance of the enclosing class.</li>
</ul>
</li>
<li><code>abstract</code> when you don’t want to provide implementations in the current class:<ul>
<li>on methods - when subclasses have to provide the actual implementation, but you want to invoke these methods (no matter how they are implemented) in this class.</li>
<li>on classes - to denote that the class may have abstract methods.</li>
</ul>
</li>
<li><code>final</code> when you don’t want something to change.<ul>
<li>on fields, when you want to assign the value only once. It is useful when you want to pass a local variable to an inner class - you have to declare it final.</li>
<li>on classes and methods - when you don’t want subclasses to be able to extend / override them.</li>
</ul>
</li>
</ul>
<p>方法的访问修饰符：</p>
<p><img src="https://img-blog.csdn.net/20170705182613037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFxcXExOTkzcXFxcXE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/部门工资前三高的员工/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/部门工资前三高的员工/" class="post-title-link" itemprop="url">部门工资前三高的员工</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 16:43:36 / 修改时间：16:43:37" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:36+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p><code>Employee</code> 表包含所有员工信息，每个员工有其对应的工号 <code>Id</code>，姓名 <code>Name</code>，工资 <code>Salary</code> 和部门编号 <code>DepartmentId</code> 。<code>Department</code> 表包含公司所有部门的信息。编写一个 SQL 查询，找出每个部门获得前三高工资的所有员工。</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><ol>
<li>如何找出每个部门排名前三的工资值？两张Employee表做笛卡尔积，筛选留下同一部门的、工资不低于自己的记录，并且比自己工资高的数值不能小于3个。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> Employee <span class="keyword">as</span> e1</span><br><span class="line"><span class="keyword">where</span> <span class="number">3</span> &gt; (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary) <span class="keyword">from</span> Employee <span class="keyword">as</span> e2 <span class="keyword">where</span> e1.Salary &lt; e2.Salary <span class="keyword">and</span> e1.DepartmentId = e2.DepartmentId)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>将 Employee 和 Department 合并</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d1.Name <span class="keyword">as</span> Department, e1.Name <span class="keyword">as</span> Employee, e1.Salary <span class="keyword">as</span> Salary <span class="keyword">from</span> Employee <span class="keyword">as</span> e1, Department <span class="keyword">as</span> d1</span><br><span class="line"><span class="keyword">where</span> e1.DepartmentId = d1.Id <span class="keyword">and</span> <span class="number">3</span> &gt; (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary) <span class="keyword">from</span> Employee <span class="keyword">as</span> e2 <span class="keyword">where</span> e1.Salary &lt; e2.Salary <span class="keyword">and</span> e1.DepartmentId = e2.DepartmentId)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/dbis_starter_kit_developNote/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/dbis_starter_kit_developNote/" class="post-title-link" itemprop="url">dbis_starter_kit_developNote</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 16:43:33 / 修改时间：16:43:34" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:33+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Win10远程桌面-出现-身份验证错误，要求的函数不受支持"><a href="#Win10远程桌面-出现-身份验证错误，要求的函数不受支持" class="headerlink" title="Win10远程桌面 出现 身份验证错误，要求的函数不受支持"></a><a href="https://www.cnblogs.com/raswin/p/9018388.html" target="_blank" rel="noopener">Win10远程桌面 出现 身份验证错误，要求的函数不受支持</a></h4><p>运行 gpedit.msc，本地组策略：计算机配置&gt;管理模板&gt;系统&gt;凭据分配&gt;加密Oracle修正</p>
<p>选择启用并选择易受攻击。</p>
<p>cmd 中输入：mstsc /admin /v:192.168.190.191</p>
<p>mstsc (Microsoft terminal services client) 创建与<a href="https://baike.baidu.com/item/终端服务器/6984729" target="_blank" rel="noopener">终端服务器</a>或其他远程计算机的连接，编辑现有“<a href="https://baike.baidu.com/item/远程桌面连接/669361" target="_blank" rel="noopener">远程桌面连接</a>(.rdp)”配置文件，并将 Windows XP 连接,迁移到新的 .rdp 文件中。Microsoft Telnet Screen Control ，即“微软<a href="https://baike.baidu.com/item/远程桌面" target="_blank" rel="noopener">远程桌面</a>控制”。</p>
<h4 id="创建考勤用户-用户ID设置下拉菜单"><a href="#创建考勤用户-用户ID设置下拉菜单" class="headerlink" title="创建考勤用户-用户ID设置下拉菜单"></a>创建考勤用户-用户ID设置下拉菜单</h4><p>数据库表与 model 对应。在创建考勤用户时，只显示未成为 atd_user 的 student 的 username.  在 dbis_user_student 表中取出所有 use_id，在 atd_user 表中取出所有的 uid, 求差集。得到 useId 的集合，到 user 表中查得 user 对象，将 userId 和 userName 存入数组，用 DropList 展示数据。</p>
<p>backend\models\AtdUser.php：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getRemainUsers</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $atdUsers = <span class="keyword">self</span>::find()-&gt;select([<span class="string">"uid"</span>])-&gt;all();</span><br><span class="line">    $atdUserIds=<span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($atdUsers); $i++) &#123;</span><br><span class="line">        <span class="comment">// var_dump($atdUsers[$i]["uid"]);</span></span><br><span class="line">        $atdUserIds[] = $atdUsers[$i][<span class="string">"uid"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $userStudents = \common\models\UserStudent::find()-&gt;select([<span class="string">"userid"</span>])-&gt;all();</span><br><span class="line">    $userStudentIds=<span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($userStudents); $i++) &#123;</span><br><span class="line">        <span class="comment">// var_dump($atdUsers[$i]["uid"]);</span></span><br><span class="line">        $userStudentIds[] = $userStudents[$i][<span class="string">"userid"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $userIdList=array_diff($userStudentIds, $atdUserIds); </span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据userIdList从User表中取出姓名</span></span><br><span class="line">    $userList=User::findAll($userIdList);</span><br><span class="line">    <span class="comment">// var_dump($userList);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> ($userList <span class="keyword">as</span> $key =&gt; $user) &#123;</span><br><span class="line">        $userDropList[$user[<span class="string">'id'</span>]] = $user[<span class="string">'username'</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// var_dump($userDropList);</span></span><br><span class="line">    <span class="comment">// die();</span></span><br><span class="line">    <span class="keyword">return</span> $userDropList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="PHP打印输出"><a href="#PHP打印输出" class="headerlink" title="PHP打印输出"></a>PHP打印输出</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump($userStudents[<span class="number">1</span>][<span class="string">'userid'</span>]);</span><br><span class="line"><span class="keyword">die</span>();</span><br></pre></td></tr></table></figure>
<p>如果改了_form 的参数，其他用到该表格的地方的参数也需要修改。AtdUserController.php中，update 和 create 函数传递给 _form 的 userList 并不相同，create 可以直接调用 getRemainUsers()，update的 userList 应包含所有user，如果只是传入剩余的学生列表，下拉框中会默认显示数组的第一个值。</p>
<p><a href="https://www.oschina.net/question/1182150_174242" target="_blank" rel="noopener">下拉列表默认选中不是在options参数里面决定的，而是$model-&gt;category的值决定的。</a></p>
<h4 id="考勤页面-默认按照ccid排序"><a href="#考勤页面-默认按照ccid排序" class="headerlink" title="考勤页面 默认按照ccid排序"></a>考勤页面 默认按照ccid排序</h4><p>backend\views\attendance\atd-user\index.php 中使用了 GridView 组件来展示列表，在 backend\controllers\attendance\AtdUserController.php 的 actionIndex() 中创建 AtduserQuery 对象用于数据库查询，最后传入参数。</p>
<p>修改 backend\models\search\AtdUserQuery.php：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$dataProvider = <span class="keyword">new</span> ActiveDataProvider([</span><br><span class="line">    <span class="string">'query'</span> =&gt; $query,</span><br><span class="line">    <span class="comment">// 新增配置项 默认 ccid 升序</span></span><br><span class="line">    <span class="string">'sort'</span> =&gt; [<span class="string">'defaultOrder'</span> =&gt; [<span class="string">'ccid'</span> =&gt; SORT_ASC]], </span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<h4 id="创建用户时报错-500，但能成功创建"><a href="#创建用户时报错-500，但能成功创建" class="headerlink" title="创建用户时报错 500，但能成功创建"></a>创建用户时报错 500，但能成功创建</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">0 D:\xampp\htdocs\dbis_starter-kit\vendor\yiisoft\yii2\rbac\DbManager.php(835): yii\base\ErrorHandler-&gt;handleError(8, <span class="string">'Trying to get p...'</span>, <span class="string">'D:\\xampp\\htdocs...'</span>, 835, Array)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1 D:\xampp\htdocs\dbis_starter-kit\common\models\User.php(293): yii\rbac\DbManager-&gt;assign(NULL, 165)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">2 D:\xampp\htdocs\dbis_starter-kit\backend\models\UserForm.php(126): common\models\User-&gt;afterSignup()</span></span><br><span class="line"><span class="meta">#</span><span class="bash">3 D:\xampp\htdocs\dbis_starter-kit\backend\controllers\UserController.php(69): backend\models\UserForm-&gt;save()</span></span><br><span class="line"><span class="meta">#</span><span class="bash">4 [internal <span class="keyword">function</span>]: backend\controllers\UserController-&gt;actionCreate()</span></span><br></pre></td></tr></table></figure>
<p>是因为数据库中没有 user 这个角色，因此 getRole() 返回了 NULL 值：</p>
<p>（afterSignup()函数）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Default role</span></span><br><span class="line">$auth = Yii::$app-&gt;authManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if $auth-&gt;getRole(User::ROLE_USER) = NULL ? </span></span><br><span class="line">$auth-&gt;assign($auth-&gt;getRole(User::ROLE_USER), <span class="keyword">$this</span>-&gt;getId());</span><br></pre></td></tr></table></figure>
<p>直接注释掉这两行。</p>
<p>另外，状态为 NOT Active 的用户无法登录。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Joyce" src="/images/logo.jpg">
  <p class="site-author-name" itemprop="name">Joyce</p>
  <div class="site-description" itemprop="description">Growing Path</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">305</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Joycepy" title="GitHub → https://github.com/Joycepy" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/pichunying@gmail.com" title="E-Mail → pichunying@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://tiffanychou21.github.io/" title="https://tiffanychou21.github.io/" rel="noopener" target="_blank">ZCF</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://jybwob.tk/" title="http://jybwob.tk/" rel="noopener" target="_blank">JYB</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://flippedyue.github.io/" title="https://flippedyue.github.io/" rel="noopener" target="_blank">JY</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joyce</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>

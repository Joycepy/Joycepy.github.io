<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.8.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Growing Path">
<meta property="og:type" content="website">
<meta property="og:title" content="Joyce&#39; Blog">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Joyce&#39; Blog">
<meta property="og:description" content="Growing Path">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Joyce&#39; Blog">
<meta name="twitter:description" content="Growing Path">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Joyce' Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Joyce' Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/21/spider-for-hiresearch/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/21/spider-for-hiresearch/" class="post-title-link" itemprop="url">spider for hiresearch</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-21 08:41:55 / 修改时间：10:57:22" itemprop="dateCreated datePublished" datetime="2020-11-21T08:41:55+08:00">2020-11-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><code>xlrd</code> 是python环境下对excel中的数据进行读取的一个模板，可以进行的操作有：</p>
<ul>
<li>读取有效单元格的行数、列数</li>
<li>读取指定行（列）的所有单元格的值</li>
<li>读取指定单元格的值</li>
<li>读取指定单元格的数据类型</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 78</span><br></pre></td></tr></table></figure>
<p>调整ChromeDriver版本，下载chromedriver.exe放到Script文件夹下。</p>
<p>Code from JZ : </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xlrd</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> Select</span><br><span class="line"></span><br><span class="line">subject = <span class="string">'基因'</span></span><br><span class="line">lang = <span class="string">'中文'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取excel中的信息, 然后根据信息爬虫</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># 打开浏览器</span></span><br><span class="line">    url = <span class="string">'http://www.hiresearch.cn/pcomp'</span></span><br><span class="line">    browser = webdriver.Chrome()</span><br><span class="line">    browser.get(url)</span><br><span class="line">    browser.maximize_window()</span><br><span class="line">    <span class="comment"># 先添加两个搜索框</span></span><br><span class="line">    add_element = browser.find_element_by_xpath(<span class="string">'//*[@id="logic_1"]/div[1]/a'</span>)</span><br><span class="line">    add_element.click()</span><br><span class="line">    add_element.click()</span><br><span class="line">    <span class="comment"># 输入主题</span></span><br><span class="line">    subject_text = browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword1"]'</span>)</span><br><span class="line">    subject_text.click()</span><br><span class="line">    subject_text.send_keys(subject)</span><br><span class="line">    <span class="comment"># 语言全选按钮</span></span><br><span class="line">    all_lan = browser.find_element_by_xpath(<span class="string">'//*[@id="searchForm"]/div[3]/div/div[4]/div[2]/div/div[1]/div/div/label'</span>)</span><br><span class="line">    all_lan.click()</span><br><span class="line">    <span class="comment"># 中文按钮</span></span><br><span class="line">    ch = browser.find_element_by_xpath(<span class="string">'//*[@id="lblcn"]'</span>)</span><br><span class="line">    ch.click()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 选择类别</span></span><br><span class="line">    Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltType2"]'</span>)).select_by_visible_text(<span class="string">'基金名称'</span>)</span><br><span class="line">    Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltType3"]'</span>)).select_by_visible_text(<span class="string">'基金类别'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 选择年份</span></span><br><span class="line">    browser.find_element_by_xpath(<span class="string">'//*[@id="limit_bar"]'</span>).click()</span><br><span class="line">    browser.find_element_by_xpath(<span class="string">'//*[@id="rangeYear"]'</span>).click()</span><br><span class="line">    <span class="comment"># 读取信息</span></span><br><span class="line">    name = <span class="string">'limit-pcy.xlsx'</span></span><br><span class="line">    wb = xlrd.open_workbook(filename=name)  <span class="comment"># 打开文件</span></span><br><span class="line"></span><br><span class="line">    sheet1 = wb.sheet_by_index(<span class="number">0</span>)  <span class="comment"># 通过索引获取表格</span></span><br><span class="line">    type1s = sheet1.col_values(<span class="number">2</span>)  <span class="comment"># 获取类别</span></span><br><span class="line">    type2s = sheet1.col_values(<span class="number">3</span>)  <span class="comment"># 获取自类别</span></span><br><span class="line">    years = sheet1.col_values(<span class="number">4</span>)  <span class="comment"># 年份</span></span><br><span class="line">    counts = sheet1.col_values(<span class="number">5</span>)  <span class="comment"># 数量</span></span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    beq = <span class="number">0</span></span><br><span class="line">    end = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; len(years):</span><br><span class="line">        type1 = type1s[i]</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).clear()</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).click()</span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword2"]'</span>).send_keys(type1)</span><br><span class="line">        type2 = type2s[i]</span><br><span class="line">        <span class="keyword">if</span> len(type2) &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).clear()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).send_keys(type2)</span><br><span class="line">            <span class="keyword">except</span> Exception:</span><br><span class="line">                add_element.click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).clear()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).click()</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="TxtKeyword3"]'</span>).send_keys(type2)</span><br><span class="line">        year = years[i]</span><br><span class="line">        <span class="keyword">if</span> type(year) == float:</span><br><span class="line">            beq = end = int(year)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ss = year.split(<span class="string">'-'</span>)</span><br><span class="line">            beq = int(ss[<span class="number">0</span>])</span><br><span class="line">            end = int(ss[<span class="number">1</span>])</span><br><span class="line">        <span class="comment"># 如果年份有-需要处理一下</span></span><br><span class="line">        Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltBeginYear"]'</span>)).select_by_visible_text(str(beq))</span><br><span class="line">        Select(browser.find_element_by_xpath(<span class="string">'//*[@id="SltEndYear"]'</span>)).select_by_visible_text(str(end))</span><br><span class="line">        <span class="comment"># 开始检索</span></span><br><span class="line">        browser.find_element_by_xpath(<span class="string">'//*[@id="btnsearch1"]'</span>).click()</span><br><span class="line">        count = int(counts[i])</span><br><span class="line">        sleep(<span class="number">2</span>)</span><br><span class="line">        <span class="comment"># 从1到count</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range((count + <span class="number">99</span>) // <span class="number">100</span>):</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="tabExport"]'</span>).click()</span><br><span class="line">            Select(browser.find_element_by_xpath(<span class="string">'//*[@id="modalExport"]'</span>)).select_by_visible_text(<span class="string">'项目 + 所有成果'</span>)</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).clear()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).click()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportFrom"]'</span>).send_keys(j * <span class="number">100</span> + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).clear()</span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).click()</span><br><span class="line">            <span class="keyword">if</span> count &gt;= j * <span class="number">100</span> + <span class="number">100</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).send_keys(j * <span class="number">100</span> + <span class="number">100</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                browser.find_element_by_xpath(<span class="string">'//*[@id="modalExportTo"]'</span>).send_keys(count)</span><br><span class="line"></span><br><span class="line">            browser.find_element_by_xpath(<span class="string">'//*[@id="modalBtnExport"]'</span>).click()</span><br><span class="line">            sleep(<span class="number">3</span>)</span><br><span class="line">        print(type1, type2, beq, end, count)</span><br><span class="line">        handle = browser.current_window_handle</span><br><span class="line">        handles = browser.window_handles</span><br><span class="line">        <span class="keyword">for</span> newhandle <span class="keyword">in</span> handles:</span><br><span class="line">            <span class="comment"># 筛选新打开的窗口B</span></span><br><span class="line">            <span class="keyword">if</span> newhandle != handle:</span><br><span class="line">                browser.switch_to_window(newhandle)</span><br><span class="line">                browser.close()</span><br><span class="line">        browser.switch_to_window(handle)</span><br><span class="line">        sleep(<span class="number">10</span>)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">'success!'</span>)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/20/数的子结构/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/20/数的子结构/" class="post-title-link" itemprop="url">数的子结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-20 09:47:35 / 修改时间：09:59:54" itemprop="dateCreated datePublished" datetime="2020-11-20T09:47:35+08:00">2020-11-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>输入两棵二叉树A和B，判断B是不是A的子结构。(约定空树不是任意一个树的子结构)</p>
<p>B是A的子结构， 即 A中有出现和B相同的结构和节点值。</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><p>树的问题，递归解决。题目未说明是否会出现数值相同的节点</p>
<ol>
<li>是左子树的子树；2. 是右子树的子树；3. 从根节点重合</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * struct TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode *left;</span></span><br><span class="line"><span class="comment"> *     TreeNode *right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) : val(x), left(NULL), right(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSub</span><span class="params">(TreeNode* A, TreeNode* B)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//从根节点重合</span></span><br><span class="line">        <span class="keyword">if</span>(B==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(A==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(A-&gt;val==B-&gt;val)</span><br><span class="line">            <span class="keyword">return</span> isSub(A-&gt;left,B-&gt;left)&amp;&amp;isSub(A-&gt;right,B-&gt;right);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isSubStructure</span><span class="params">(TreeNode* A, TreeNode* B)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// "约定空树不是任意一个树的子结构"实际上不利于编程</span></span><br><span class="line">        <span class="keyword">if</span>(B==<span class="literal">NULL</span>||A==<span class="literal">NULL</span>)<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> isSub(A,B) || isSubStructure(A-&gt;left,B) || isSubStructure(A-&gt;right,B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/分数排名/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/分数排名/" class="post-title-link" itemprop="url">分数排名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-27 16:43:44" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:44+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>编写一个 SQL 查询来实现分数排名。如果两个分数相同，则两个分数排名（Rank）相同。请注意，平分后的下一个名次应该是下一个连续的整数值。换句话说，名次之间不应该有“间隔”。</p>
<p><strong>提示：</strong>对于 MySQL 解决方案，如果要转义用作列名的保留字，可以在关键字之前和之后使用撇号。例如 <strong>`Rank`</strong></p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Score, <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">ORDER</span> <span class="keyword">by</span> Score <span class="keyword">DESC</span>) <span class="keyword">as</span> <span class="string">`Rank`</span> <span class="keyword">from</span> Scores</span><br></pre></td></tr></table></figure>
<h3 id="sql排名函数-ROW-NUMBER、RANK、DENSE-RANK、NTILE"><a href="#sql排名函数-ROW-NUMBER、RANK、DENSE-RANK、NTILE" class="headerlink" title="sql排名函数(ROW_NUMBER、RANK、DENSE_RANK、NTILE)"></a>sql排名函数(ROW_NUMBER、RANK、DENSE_RANK、NTILE)</h3><p>排号从1开始，都需要有 over (order by …) 子句。<a href="https://www.cnblogs.com/52xf/p/4209211.html" target="_blank" rel="noopener">https://www.cnblogs.com/52xf/p/4209211.html</a></p>
<p>案例：</p>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_data.png" alt="表结构和初始数据-晓菜鸟"></p>
<h4 id="ROW-NUMBER"><a href="#ROW-NUMBER" class="headerlink" title="ROW_NUMBER"></a>ROW_NUMBER</h4><p>根据over子句对某一列排序，按照over子句排序结果为查询出来的每一行记录生成一个序号，依次排号且不重复。</p>
<p>over子句与order by子句互不影响。如下sql语句，按照SubTime降序编号，结果按照TotalPrice降序返回：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span>) <span class="keyword">as</span> row_num, * <span class="keyword">from</span> [<span class="keyword">Order</span>] <span class="keyword">order</span> <span class="keyword">by</span> [TotalPrice] <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<p>可用于实现web分页。根据订单提交时间倒序排列获取第三至第五条数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> orderSection <span class="keyword">as</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">select</span> ROW_NUMBER() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span>) <span class="keyword">rownum</span>, * <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> [orderSection] <span class="keyword">where</span> <span class="keyword">rownum</span> <span class="keyword">between</span> <span class="number">3</span> <span class="keyword">and</span> <span class="number">5</span> <span class="keyword">order</span> <span class="keyword">by</span> [<span class="keyword">SubTime</span>] <span class="keyword">desc</span></span><br></pre></td></tr></table></figure>
<h4 id="RANK"><a href="#RANK" class="headerlink" title="RANK"></a>RANK</h4><p>rank函数对于over子句中排序字段值相同的记录生成相同的序号，后面的记录的排号是基于当前的记录数，即：同一组的序号是一样的，下一组的序号是：上一组的序号+上一组的记录的数量-1.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [UserId]) <span class="keyword">as</span> <span class="keyword">rank</span>,* <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_rank_1.png" alt="使用rank函数排名-晓菜鸟"></p>
<h4 id="DENSE-RANK"><a href="#DENSE-RANK" class="headerlink" title="DENSE_RANK"></a>DENSE_RANK</h4><p>dense_rank与rank的区别在于dense_rank的排号是连续的，rank的排号可能不连续。在同一组中的记录排号相同。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">DENSE_RANK</span>() <span class="keyword">OVER</span>(<span class="keyword">order</span> <span class="keyword">by</span> [UserId]) <span class="keyword">as</span> den_rank,* <span class="keyword">from</span> [<span class="keyword">Order</span>]</span><br></pre></td></tr></table></figure>
<p><img src="https://images.cnblogs.com/cnblogs_com/52XF/642690/o_dense_rank.png" alt="使用dense_rank函数排名-晓菜鸟"></p>
<h4 id="NTILE"><a href="#NTILE" class="headerlink" title="NTILE"></a>NTILE</h4><p>ntile有一个参数用于指出桶数，将数据排序后进行装桶处理并编号。装桶及编号的规则：<a href="https://www.cnblogs.com/52xf/p/4209211.html" target="_blank" rel="noopener">https://www.cnblogs.com/52xf/p/4209211.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/nkoj-develop-note/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/nkoj-develop-note/" class="post-title-link" itemprop="url">nkoj-develop-note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-27 16:43:40" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:40+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="pm2和nodejs"><a href="#pm2和nodejs" class="headerlink" title="pm2和nodejs"></a>pm2和nodejs</h4><p>nodejs是javascript的运行环境，异步IO，支持高并发。</p>
<p>PM2 (Process Manager 2) 是JavaScript运行时Node.js的进程管理器。</p>
<h4 id="private、protected、public、static、final"><a href="#private、protected、public、static、final" class="headerlink" title="private、protected、public、static、final"></a>private、protected、public、static、final</h4><p>对任何类、方法、参数、变量，严格控制访问范围，这样有利于模块解耦。</p>
<ul>
<li><code>private</code> should be used when something is not used outside of a given class<ul>
<li>for methods and fields - when they are used only within the same class</li>
<li>for classes - only on nested classes, when used in the same class</li>
</ul>
</li>
<li><code>protected</code>should be used when<ul>
<li>for methods and field - when you need to make them accessible to subclasses only</li>
<li>for classes - again only nested classes, accessible by subcalsses</li>
</ul>
</li>
<li><p><code>public</code> is used when something is accessible by every other class</p>
</li>
<li><p><code>static</code> is used when you don’t need an instance of a class (i.e. object) to use it:</p>
<ul>
<li>for fields - when you want to have a global field</li>
<li>for methods - when you need utility functions that do not depend on object state</li>
<li>for nested classes - when you want to access them without an instance of the enclosing class.</li>
</ul>
</li>
<li><code>abstract</code> when you don’t want to provide implementations in the current class:<ul>
<li>on methods - when subclasses have to provide the actual implementation, but you want to invoke these methods (no matter how they are implemented) in this class.</li>
<li>on classes - to denote that the class may have abstract methods.</li>
</ul>
</li>
<li><code>final</code> when you don’t want something to change.<ul>
<li>on fields, when you want to assign the value only once. It is useful when you want to pass a local variable to an inner class - you have to declare it final.</li>
<li>on classes and methods - when you don’t want subclasses to be able to extend / override them.</li>
</ul>
</li>
</ul>
<p>方法的访问修饰符：</p>
<p><img src="https://img-blog.csdn.net/20170705182613037?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFxcXExOTkzcXFxcXE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/部门工资前三高的员工/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/部门工资前三高的员工/" class="post-title-link" itemprop="url">部门工资前三高的员工</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 16:43:36 / 修改时间：16:43:37" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:36+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p><code>Employee</code> 表包含所有员工信息，每个员工有其对应的工号 <code>Id</code>，姓名 <code>Name</code>，工资 <code>Salary</code> 和部门编号 <code>DepartmentId</code> 。<code>Department</code> 表包含公司所有部门的信息。编写一个 SQL 查询，找出每个部门获得前三高工资的所有员工。</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><ol>
<li>如何找出每个部门排名前三的工资值？两张Employee表做笛卡尔积，筛选留下同一部门的、工资不低于自己的记录，并且比自己工资高的数值不能小于3个。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> Employee <span class="keyword">as</span> e1</span><br><span class="line"><span class="keyword">where</span> <span class="number">3</span> &gt; (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary) <span class="keyword">from</span> Employee <span class="keyword">as</span> e2 <span class="keyword">where</span> e1.Salary &lt; e2.Salary <span class="keyword">and</span> e1.DepartmentId = e2.DepartmentId)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>将 Employee 和 Department 合并</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> d1.Name <span class="keyword">as</span> Department, e1.Name <span class="keyword">as</span> Employee, e1.Salary <span class="keyword">as</span> Salary <span class="keyword">from</span> Employee <span class="keyword">as</span> e1, Department <span class="keyword">as</span> d1</span><br><span class="line"><span class="keyword">where</span> e1.DepartmentId = d1.Id <span class="keyword">and</span> <span class="number">3</span> &gt; (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> e2.Salary) <span class="keyword">from</span> Employee <span class="keyword">as</span> e2 <span class="keyword">where</span> e1.Salary &lt; e2.Salary <span class="keyword">and</span> e1.DepartmentId = e2.DepartmentId)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/27/dbis_starter_kit_developNote/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/27/dbis_starter_kit_developNote/" class="post-title-link" itemprop="url">dbis_starter_kit_developNote</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-27 16:43:33 / 修改时间：16:43:34" itemprop="dateCreated datePublished" datetime="2020-10-27T16:43:33+08:00">2020-10-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Win10远程桌面-出现-身份验证错误，要求的函数不受支持"><a href="#Win10远程桌面-出现-身份验证错误，要求的函数不受支持" class="headerlink" title="Win10远程桌面 出现 身份验证错误，要求的函数不受支持"></a><a href="https://www.cnblogs.com/raswin/p/9018388.html" target="_blank" rel="noopener">Win10远程桌面 出现 身份验证错误，要求的函数不受支持</a></h4><p>运行 gpedit.msc，本地组策略：计算机配置&gt;管理模板&gt;系统&gt;凭据分配&gt;加密Oracle修正</p>
<p>选择启用并选择易受攻击。</p>
<p>cmd 中输入：mstsc /admin /v:192.168.190.191</p>
<p>mstsc (Microsoft terminal services client) 创建与<a href="https://baike.baidu.com/item/终端服务器/6984729" target="_blank" rel="noopener">终端服务器</a>或其他远程计算机的连接，编辑现有“<a href="https://baike.baidu.com/item/远程桌面连接/669361" target="_blank" rel="noopener">远程桌面连接</a>(.rdp)”配置文件，并将 Windows XP 连接,迁移到新的 .rdp 文件中。Microsoft Telnet Screen Control ，即“微软<a href="https://baike.baidu.com/item/远程桌面" target="_blank" rel="noopener">远程桌面</a>控制”。</p>
<h4 id="创建考勤用户-用户ID设置下拉菜单"><a href="#创建考勤用户-用户ID设置下拉菜单" class="headerlink" title="创建考勤用户-用户ID设置下拉菜单"></a>创建考勤用户-用户ID设置下拉菜单</h4><p>数据库表与 model 对应。在创建考勤用户时，只显示未成为 atd_user 的 student 的 username.  在 dbis_user_student 表中取出所有 use_id，在 atd_user 表中取出所有的 uid, 求差集。得到 useId 的集合，到 user 表中查得 user 对象，将 userId 和 userName 存入数组，用 DropList 展示数据。</p>
<p>backend\models\AtdUser.php：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getRemainUsers</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $atdUsers = <span class="keyword">self</span>::find()-&gt;select([<span class="string">"uid"</span>])-&gt;all();</span><br><span class="line">    $atdUserIds=<span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($atdUsers); $i++) &#123;</span><br><span class="line">        <span class="comment">// var_dump($atdUsers[$i]["uid"]);</span></span><br><span class="line">        $atdUserIds[] = $atdUsers[$i][<span class="string">"uid"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $userStudents = \common\models\UserStudent::find()-&gt;select([<span class="string">"userid"</span>])-&gt;all();</span><br><span class="line">    $userStudentIds=<span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt; count($userStudents); $i++) &#123;</span><br><span class="line">        <span class="comment">// var_dump($atdUsers[$i]["uid"]);</span></span><br><span class="line">        $userStudentIds[] = $userStudents[$i][<span class="string">"userid"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    $userIdList=array_diff($userStudentIds, $atdUserIds); </span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据userIdList从User表中取出姓名</span></span><br><span class="line">    $userList=User::findAll($userIdList);</span><br><span class="line">    <span class="comment">// var_dump($userList);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> ($userList <span class="keyword">as</span> $key =&gt; $user) &#123;</span><br><span class="line">        $userDropList[$user[<span class="string">'id'</span>]] = $user[<span class="string">'username'</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// var_dump($userDropList);</span></span><br><span class="line">    <span class="comment">// die();</span></span><br><span class="line">    <span class="keyword">return</span> $userDropList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="PHP打印输出"><a href="#PHP打印输出" class="headerlink" title="PHP打印输出"></a>PHP打印输出</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var_dump($userStudents[<span class="number">1</span>][<span class="string">'userid'</span>]);</span><br><span class="line"><span class="keyword">die</span>();</span><br></pre></td></tr></table></figure>
<p>如果改了_form 的参数，其他用到该表格的地方的参数也需要修改。AtdUserController.php中，update 和 create 函数传递给 _form 的 userList 并不相同，create 可以直接调用 getRemainUsers()，update的 userList 应包含所有user，如果只是传入剩余的学生列表，下拉框中会默认显示数组的第一个值。</p>
<p><a href="https://www.oschina.net/question/1182150_174242" target="_blank" rel="noopener">下拉列表默认选中不是在options参数里面决定的，而是$model-&gt;category的值决定的。</a></p>
<h4 id="考勤页面-默认按照ccid排序"><a href="#考勤页面-默认按照ccid排序" class="headerlink" title="考勤页面 默认按照ccid排序"></a>考勤页面 默认按照ccid排序</h4><p>backend\views\attendance\atd-user\index.php 中使用了 GridView 组件来展示列表，在 backend\controllers\attendance\AtdUserController.php 的 actionIndex() 中创建 AtduserQuery 对象用于数据库查询，最后传入参数。</p>
<p>修改 backend\models\search\AtdUserQuery.php：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$dataProvider = <span class="keyword">new</span> ActiveDataProvider([</span><br><span class="line">    <span class="string">'query'</span> =&gt; $query,</span><br><span class="line">    <span class="comment">// 新增配置项 默认 ccid 升序</span></span><br><span class="line">    <span class="string">'sort'</span> =&gt; [<span class="string">'defaultOrder'</span> =&gt; [<span class="string">'ccid'</span> =&gt; SORT_ASC]], </span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<h4 id="创建用户时报错-500，但能成功创建"><a href="#创建用户时报错-500，但能成功创建" class="headerlink" title="创建用户时报错 500，但能成功创建"></a>创建用户时报错 500，但能成功创建</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">0 D:\xampp\htdocs\dbis_starter-kit\vendor\yiisoft\yii2\rbac\DbManager.php(835): yii\base\ErrorHandler-&gt;handleError(8, <span class="string">'Trying to get p...'</span>, <span class="string">'D:\\xampp\\htdocs...'</span>, 835, Array)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1 D:\xampp\htdocs\dbis_starter-kit\common\models\User.php(293): yii\rbac\DbManager-&gt;assign(NULL, 165)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">2 D:\xampp\htdocs\dbis_starter-kit\backend\models\UserForm.php(126): common\models\User-&gt;afterSignup()</span></span><br><span class="line"><span class="meta">#</span><span class="bash">3 D:\xampp\htdocs\dbis_starter-kit\backend\controllers\UserController.php(69): backend\models\UserForm-&gt;save()</span></span><br><span class="line"><span class="meta">#</span><span class="bash">4 [internal <span class="keyword">function</span>]: backend\controllers\UserController-&gt;actionCreate()</span></span><br></pre></td></tr></table></figure>
<p>是因为数据库中没有 user 这个角色，因此 getRole() 返回了 NULL 值：</p>
<p>（afterSignup()函数）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Default role</span></span><br><span class="line">$auth = Yii::$app-&gt;authManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if $auth-&gt;getRole(User::ROLE_USER) = NULL ? </span></span><br><span class="line">$auth-&gt;assign($auth-&gt;getRole(User::ROLE_USER), <span class="keyword">$this</span>-&gt;getId());</span><br></pre></td></tr></table></figure>
<p>直接注释掉这两行。</p>
<p>另外，状态为 NOT Active 的用户无法登录。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/06/sql查询第n高的数据/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/sql查询第n高的数据/" class="post-title-link" itemprop="url">sql查询第n高的数据</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-06 15:47:58" itemprop="dateCreated datePublished" datetime="2020-10-06T15:47:58+08:00">2020-10-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>查询第N高的数据</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><p>用到了limit、offset、ifnull等关键字的知识点。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    column_list</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    table1</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_list</span><br><span class="line"><span class="keyword">LIMIT</span> <span class="keyword">row_count</span> <span class="keyword">OFFSET</span> <span class="keyword">offset</span>;</span><br></pre></td></tr></table></figure>
<p>row_count表明将要返回的行数。offset表明从开头要跳过的行数。</p>
<p>在MySQL中可以缩写：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    employee_id, first_name, last_name</span><br><span class="line">FROM</span><br><span class="line">    employees</span><br><span class="line">ORDER BY first_name</span><br><span class="line">LIMIT 3 , 5;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(expression, alt_value)</span><br></pre></td></tr></table></figure>
<p>IFNULL() 函数用于判断第一个表达式是否为 NULL，如果为 NULL 则返回第二个参数的值，如果不为 NULL 则返回第一个参数的值。</p>
<p>sql的 order by 默认为升序asc，desc是降序。</p>
<p>最终答案为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT</span><br><span class="line">BEGIN</span><br><span class="line">  set N=N-1;</span><br><span class="line">  RETURN (</span><br><span class="line">      # Write your MySQL query statement below.</span><br><span class="line">      select ifnull(</span><br><span class="line">          (select distinct Salary from Employee</span><br><span class="line">          order by Salary desc</span><br><span class="line">          limit N,1),</span><br><span class="line">          null)</span><br><span class="line">  );</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/06/WEB页面跳转/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/WEB页面跳转/" class="post-title-link" itemprop="url">WEB页面跳转</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-06 15:47:54" itemprop="dateCreated datePublished" datetime="2020-10-06T15:47:54+08:00">2020-10-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在改bug时遇到了下面的问题：</p>
<p>当前页面：<a href="http://exploit.nkdbis.cn" target="_blank" rel="noopener">http://exploit.nkdbis.cn</a></p>
<p><strong>原来的代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;h4 class=&quot;g-aline g-nav-lr-left l-title&quot;&gt;</span><br><span class="line">    &lt;a :href=&quot;&apos;/article/&apos; + item.id&quot;&gt;&#123;&#123;item.title || item.name&#125;&#125;&lt;/a&gt;</span><br><span class="line">&lt;/h4&gt;</span><br></pre></td></tr></table></figure>
<p>点击链接显示：404 Not Found，查看请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://exploit.nkdbis.cn/article/8</span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: 404 Not Found</span><br><span class="line">Remote Address: 39.106.204.28:80</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>
<p><strong>将代码修改为：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&apos;/article/&apos;+item.id&quot;&gt;</span><br><span class="line">    &lt;h4&gt;&#123;&#123;item.title || item.name&#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<p>再次请求，可以成功获得资源，查看请求：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://exploit.nkdbis.cn/api/front/article/8</span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: 200 </span><br><span class="line">Remote Address: 39.106.204.28:80</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>
<p>在此记录关于web页面跳转的知识点。</p>
<h3 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h3><p>页面跳转有4种：jsp动作指令forward、html的超链接、重定向、response的响应跳转。</p>
<h4 id="jsp动作指令forward"><a href="#jsp动作指令forward" class="headerlink" title="jsp动作指令forward"></a>jsp动作指令forward</h4><p>JSP（全称JavaServer Pages）是由Sun Microsystems公司主导建立的一种动态网页技术标准。 JSP部署于网络服务器上，可以响应客户端发送的请求，并根据请求内容动态地生成HTML、XML或其他格式文档的Web网页，然后返回给请求者。</p>
<p>\<a href="jsp:forward" target="_blank" rel="noopener">jsp:forward</a>转发，也是可以带参数，带值的。</p>
<p>   <strong>·</strong> 静态中的格式：&lt;jsp:forward page=”文件或标识路径的表达式”/&gt;   </p>
<p>   <strong>·</strong> 动态中的格式：&lt;jsp:forward page=”文件路径或标识路径的表达式”&gt;<br> &lt;jsp:param name=”参数名称1” value=”值1”/&gt;<br> &lt;jsp:param name=”参数名称2” value=”值2”/&gt;<br> ……<br> \&lt;/jsp:forward&gt; </p>
<p>Forward(直接转发)是服务器直接请求资源，把内容响应给用户，这个过程只有一次请求，即只有一个request对象。Forward是一种服务器行为。</p>
<h4 id="html的超链接"><a href="#html的超链接" class="headerlink" title="html的超链接"></a>html的超链接</h4><p><a href="https://blog.csdn.net/cgl125167016/article/details/88973199#t5" target="_blank" rel="noopener">https://blog.csdn.net/cgl125167016/article/details/88973199#t5</a></p>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p> 通过修改http协议的header部分,对浏览器下达重定向指令的，让浏览器对在location中指定的url提出请求，使浏览器显示重定向网页的内容。</p>
<p>无论有没有设置基础路径，使用转发方式进行跳转的相对路径都是该文件的当前路径，而重定向跳转可以跳转到站点内或站点外的页面，所以使用绝对路径方式，“/”表示定位到服务器站点根目录。</p>
<p>Redirect(间接转发)，是服务器反馈给浏览器让它重新再发起一次请求，这个过程中有两次请求，即有两个request对象。Redirect是一种客户端行为。</p>
<h4 id="response的响应跳转"><a href="#response的响应跳转" class="headerlink" title="response的响应跳转"></a>response的响应跳转</h4><p>response是服务器对客户端的反馈，其对页面重定向的流程是：当客户端向服务器发起请求时，服务器重新给客户端一个URL地址，让客户端重新发起一个新的请求，在这个过程中，客户端第一次请求所携带的头信息将消失，在重定向之后而且地址栏显示的是重定向的页面，这是一种客户端行为。</p>
<p>可以通过sendRedirect重定向到服务器任何一个URL。若使用绝对路径，其中的根路径是服务器根目录，如URL=”/xxx”，则实际定向到<a href="http://localhost:8080/xxx。一般可使用request.getContextPath()" target="_blank" rel="noopener">http://localhost:8080/xxx。一般可使用request.getContextPath()</a> + “/xxx”来访问webapp根目录下的资源。<br>注意：通过重定向无法访问WEB-INF中的资源，因为重定向是客户端行为，相当于浏览器重新输入URL，而WEB-INF中的内容无法通过输入URL来访问。</p>
<hr>
<p>漏洞管理系统仍然存在的问题：</p>
<p>直接访问<a href="http://exploit.nkdbis.cn/index会报404：" target="_blank" rel="noopener">http://exploit.nkdbis.cn/index会报404：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://exploit.nkdbis.cn/index</span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: 404 Not Found</span><br><span class="line">Remote Address: 39.106.204.28:80</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>
<p>访问<a href="http://exploit.nkdbis.cn时，网址栏中显示http://exploit.nkdbis.cn/index，但是请求中显示：" target="_blank" rel="noopener">http://exploit.nkdbis.cn时，网址栏中显示http://exploit.nkdbis.cn/index，但是请求中显示：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Request URL: http://exploit.nkdbis.cn/</span><br><span class="line">Request Method: GET</span><br><span class="line">Status Code: 200 OK</span><br><span class="line">Remote Address: 39.106.204.28:80</span><br><span class="line">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>
<p>暂时没明白是怎么回事。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/06/dungeon-game/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/dungeon-game/" class="post-title-link" itemprop="url">dungeon-game</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-06 15:47:50" itemprop="dateCreated datePublished" datetime="2020-10-06T15:47:50+08:00">2020-10-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h4><p>编写一个函数来计算确保骑士能够拯救到公主所需的最低初始健康点数。</p>
<h4 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h4><p>动态规划</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculateMinimumHP</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; dungeon)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//dp[i][j] 表示从 dp[i][j] 到达 目的地 时最少需要的 HP，应该从右下角推到左上角</span></span><br><span class="line">    <span class="comment">//dp[i][j] = max(1， min(dp[i+1][j], dp[i][j+1]) - dungeon[i][j])</span></span><br><span class="line">    <span class="keyword">int</span> row = dungeon.size();</span><br><span class="line">    <span class="keyword">int</span> col = dungeon[<span class="number">0</span>].size();</span><br><span class="line">    <span class="keyword">int</span>** dp = <span class="keyword">new</span> <span class="keyword">int</span>* [row];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        dp[i] = <span class="keyword">new</span> <span class="keyword">int</span>[col];</span><br><span class="line">    &#125;</span><br><span class="line">    dp[row - <span class="number">1</span>][col - <span class="number">1</span>] = max(<span class="number">1</span>, <span class="number">1</span>- dungeon[row - <span class="number">1</span>][col - <span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = row<span class="number">-2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        dp[i][col<span class="number">-1</span>] = max(<span class="number">1</span>, dp[i + <span class="number">1</span>][col<span class="number">-1</span>] - dungeon[i][col<span class="number">-1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = col<span class="number">-2</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">        dp[row<span class="number">-1</span>][j] = max(<span class="number">1</span>, dp[row<span class="number">-1</span>][j + <span class="number">1</span>] - dungeon[row<span class="number">-1</span>][j]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = row - <span class="number">2</span>; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = col - <span class="number">2</span>; j &gt;=<span class="number">0</span>; j--) &#123;</span><br><span class="line">            dp[i][j]= max(<span class="number">1</span>, min(dp[i + <span class="number">1</span>][j], dp[i][j + <span class="number">1</span>]) - dungeon[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//print the dp</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; dp[i][j] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope="" itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/06/java-note-1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo.jpg">
      <meta itemprop="name" content="Joyce">
      <meta itemprop="description" content="Growing Path">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Joyce' Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/06/java-note-1/" class="post-title-link" itemprop="url">java-note-1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-06 15:47:47 / 修改时间：15:47:48" itemprop="dateCreated datePublished" datetime="2020-10-06T15:47:47+08:00">2020-10-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="SSM-SSH框架"><a href="#SSM-SSH框架" class="headerlink" title="SSM/SSH框架"></a>SSM/SSH框架</h4><p>SSH是指 Struts2 Spring Hibernate三个框架。SSM是指SpringMVC Spring MyBatis。对于MVC框架，SSH是Structs2做controller，hibernate负责持久化层；SSM是SpringMVC做controller，MyBatis负责持久化层。Structs2是Action级别，SpringMVC是方法级别，更容易实现RESTful风格。</p>
<p>SSM和SSH的共同点：由Spring以来至如DI管理各层组件；使用面向切面编程AOP管理事务、日志、权限等。</p>
<h4 id="后端编程"><a href="#后端编程" class="headerlink" title="后端编程"></a>后端编程</h4><p>框架、负载均衡、灾难恢复、缓存、消息、分布式、搜索等。</p>
<h2 id="Java动态代理"><a href="#Java动态代理" class="headerlink" title="Java动态代理"></a>Java动态代理</h2><ol>
<li>静态代理</li>
<li>JDK动态代理</li>
<li>CGLib动态代理</li>
</ol>
<p>动态代理是JDK运行期间动态创建class字节码并加载的过程。</p>
<h4 id="为什么要用Java动态代理？"><a href="#为什么要用Java动态代理？" class="headerlink" title="为什么要用Java动态代理？"></a>为什么要用Java动态代理？</h4><p>类方法数量越来越多时，静态代理的代码量会十分庞大。</p>
<p><img src="https://pic2.zhimg.com/v2-39a95afda496c248a56a5103e76837ec_r.jpg?source=1940ef5c" alt="preview"></p>
<p>Java动态代理只能对interface进行操作，不能对class操作：</p>
<p>class（非abstract）可以被实例化，interface不能被实例化，所有的interface变量都是通过向上转型并指向某个实例的。Java动态代理机制可以在运行期动态创建interface实例。</p>
<p>在运行期间动态创建一个interface实例：</p>
<ol>
<li>定义InvocationHandler实例用于实现接口的方法调用；</li>
<li>通过Proxy.newProxyInstance()创建interface实例，需要三个参数：<ol>
<li>接口类的ClassLoader；</li>
<li>需要实现的接口数组；</li>
<li>InvocationHandler实例</li>
</ol>
</li>
<li>将返回的Object转为接口类型。</li>
</ol>
<h4 id="动态字节码的生成"><a href="#动态字节码的生成" class="headerlink" title="动态字节码的生成"></a>动态字节码的生成</h4><h5 id="字节码"><a href="#字节码" class="headerlink" title="字节码"></a>字节码</h5><p>字节码通常指的是已经经过编译，但与特定机器代码无关，需要解释器转译后才能成为机器代码的中间代码。字节码通常不像源码一样可以让人阅读，而是编码后的数值常量、引用、指令等构成的序列。 字节码主要为了实现特定软件运行和软件环境、与硬件环境无关。字节码的实现方式是通过编译器和虚拟机。 <a href="https://zh.wikipedia.org/zh-cn/字节码" target="_blank" rel="noopener">维基百科</a></p>
<h5 id="ASM、CGLib"><a href="#ASM、CGLib" class="headerlink" title="ASM、CGLib"></a>ASM、CGLib</h5><p>ASM 框架可以直接操作字节码，动态修改类和方法，CGLib (Code Generation Library，代码生成库) 底层也是由ASM实现。ASM将对代码的操作包装成一个访问者，在解析JVM加载到的字节码时调用。ClassReader 是 ASM 代码的入口，通过它解析二进制字节码，实例化时它时，我们需要传入一个 ClassVisitor，在这个 Visitor 里，我们可以实现 visitMethod() / visitAnnotation() 等方法，用以定义对类结构（如方法、字段、注解）的访问方法。而 ClassWriter 接口继承了 ClassVisitor 接口，我们在实例化类访问器时，将 ClassWriter “注入” 到里面，以实现对类写入的声明。（<a href="https://zhenbianshu.github.io/2018/11/control_jvm_byte_code.html）" target="_blank" rel="noopener">https://zhenbianshu.github.io/2018/11/control_jvm_byte_code.html）</a></p>
<p>CGLib 常应用于 AOP 框架，提供方法的拦截，加入相应的业务逻辑代码。</p>
<p>Java是静态语言，放到JVM中运行之前需要先进行编译。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Joyce" src="/images/logo.jpg">
  <p class="site-author-name" itemprop="name">Joyce</p>
  <div class="site-description" itemprop="description">Growing Path</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">311</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Joycepy" title="GitHub → https://github.com/Joycepy" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/pichunying@gmail.com" title="E-Mail → pichunying@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://tiffanychou21.github.io/" title="https://tiffanychou21.github.io/" rel="noopener" target="_blank">ZCF</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://jybwob.tk/" title="http://jybwob.tk/" rel="noopener" target="_blank">JYB</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://flippedyue.github.io/" title="https://flippedyue.github.io/" rel="noopener" target="_blank">JY</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://jerrymousez.github.io/" title="https://jerrymousez.github.io/" rel="noopener" target="_blank">JZ</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joyce</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
